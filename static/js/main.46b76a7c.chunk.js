(this["webpackJsonpphilippe-fragniere"]=this["webpackJsonpphilippe-fragniere"]||[]).push([[0],{33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(11),s=a.n(l),r=(a(38),a(39),a(31)),o=a(15),c=a(16),d=a(10),u=a(18),m=a(17),h=a(12),f=a(2),p=a(64);a(40);function b(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="\xe0\xe1\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xb7/_,:;",a=0,n=t.length;a<n;a++)e=e.replace(new RegExp(t.charAt(a),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(a));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}var g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1},e.onLoad=function(){e.setState({loaded:!0})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.loaded;return i.a.createElement("img",{className:"slide-visual"+(e?" loaded":""),src:this.props.src,alt:this.props.alt,onLoad:this.onLoad})}}]),a}(i.a.Component),v=a(26),E=a(28),y=a.n(E);var D=function(e){e.id;var t,a,n=e.fields,l=e.slides,s=e.isAnimated,r=e.setDirection,o=(e.setSlideDisplayed,e.muted),c=Object(f.f)(),d=Object(f.g)();return l.map((function(e,n){return"/"+b(e.fields.label)===d.pathname&&(l[n],t=l[n-1]?l[n-1]:l[l.length-1],a=l[n+1]?l[n+1]:l[0]),null})),i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,null,i.a.createElement("title",null,"Philippe Fragniere \u2014 ",n.label)),i.a.createElement("div",{className:"slide-item",key:n.id,onClick:s?void 0:function(e){var n;(n=e).clientX<n.view.innerWidth/2?(r("left"),c.push({pathname:"/"+b(t.fields.label),state:{}})):(r("right"),c.push({pathname:"/"+b(a.fields.label),state:{}}))}},n.video?i.a.createElement(y.a,{url:n.video[0].url,playing:!s,loop:!0,playsinline:!0,width:"100%",height:"100%",className:"slide-visual loaded video",config:{file:{attributes:{autoPlay:!0,muted:o}}}}):null,n.photo&&!n.video?i.a.createElement(g,{src:n.photo[0].thumbnails.large.url,alt:n.label}):null,n.video||n.photo?null:"No visuals"))},j=a(30),w=a.n(j),N={default:9,1100:6,700:3,500:2};var O=function(e){var t=e.slides,a=e.setDirection,n=e.toggleThumbs,l=Object(f.f)(),s=t.map((function(e){return i.a.createElement("div",{className:"grid-item",key:e.id,onClick:function(){return t="/"+b(e.fields.label),a("fade"),l.push({pathname:t,state:{}}),void n();var t}},e.fields.photo?i.a.createElement(g,{src:e.fields.photo[0].thumbnails.large.url,alt:e.fields.label}):"No visuals")}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"gallery"},i.a.createElement("div",{className:"gallery-content"},i.a.createElement(w.a,{breakpointCols:N,className:"grid",columnClassName:"grid_column"},s))))};var k=function(e){var t=e.state,a=e.showThumbs,n=e.toggleThumbs,l=e.setDirection,s=Object(f.g)();function r(){return t.routes.find((function(e){return e.path===s.pathname}))}var o="Loading";return r()&&r().slide&&(o=r().slide.fields.withLabel?r().slide.fields.label:""),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:a?"white":""},a?i.a.createElement(O,{slides:t.slides,setDirection:l,toggleThumbs:n}):null,i.a.createElement("div",{className:"fixed top-left"},i.a.createElement("h1",null,a?i.a.createElement("a",{href:"#"},"Bookings"):"Philippe Fragni\xe8re")),i.a.createElement("div",{className:"fixed top-right"},i.a.createElement("h2",null,i.a.createElement("span",{onClick:n,className:"clickable"},a?"Close":"More"))),i.a.createElement("div",{className:"fixed bottom-left"},a?null:i.a.createElement("h2",null,o))))},T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onEnter=function(){n.setState({isAnimated:!0,muted:!1})},n.onExited=function(){n.setState({isAnimated:!1,muted:!1})},n.setDirection=function(e){n.setState({slideDirection:e})},n.toggleThumbs=function(){n.setState({showThumbs:!n.state.showThumbs})},n.setSlideDisplayed=function(e){n.setState((function(t){return{list:t.slides.map((function(t){return t===e?e.displayed=!0:null}))}}))},n.state={routes:[],slides:[],isAnimated:!1,slideDirection:"fade",showThumbs:!1,fetched:!1,muted:!0},n.onEnter=n.onEnter.bind(Object(d.a)(n)),n.onExited=n.onExited.bind(Object(d.a)(n)),n.setDirection=n.setDirection.bind(Object(d.a)(n)),n.toggleThumbs=n.toggleThumbs.bind(Object(d.a)(n)),n.setSlideDisplayed=n.setSlideDisplayed.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.airtable.com/v0/appqVNF1da0YQC1Tq/Photos?api_key=keyujqQNYZtE5jjIi&filterByFormula=NOT%28%7Bdraft%7D%29&sort%5B0%5D%5Bfield%5D=position&sort%5B0%5D%5Bdirection%5D=asc").then((function(e){return e.json()})).then((function(t){t.records.forEach((function(e,t){e.fields.withLabel=!0,void 0===e.fields.label&&(e.fields.label="v-"+e.id,e.fields.withLabel=!1)})),e.setState({slides:t.records});var a,n=Object(r.a)(t.records);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.setState({routes:e.state.routes.concat({path:"/"+b(i.fields.label),slide:i,displayed:!1}),slides:t.records,isAnimated:!1,fetched:!0})}}catch(l){n.e(l)}finally{n.f()}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.routes,n=t.slideDirection;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,null,i.a.createElement(f.b,{exact:!0,path:"/"},a[0]?i.a.createElement(f.a,{push:!0,to:{pathname:a[0].path,state:{}}}):null),i.a.createElement(k,{state:this.state,showThumbs:this.state.showThumbs,toggleThumbs:this.toggleThumbs,setDirection:this.setDirection}),i.a.createElement("div",{className:"slider "+n+"-transition"},a.map((function(t){var a=t.path,n=t.slide;return i.a.createElement(f.b,{key:a,exact:!0,path:a},(function(t){var a=t.match;return i.a.createElement(p.a,{in:null!=a,timeout:{enter:800,exit:800},classNames:"slide",onEnter:e.onEnter,onExited:e.onExited,unmountOnExit:!0},i.a.createElement("div",{className:"slide"},i.a.createElement(D,Object.assign({},n,{slides:e.state.slides,isAnimated:e.state.isAnimated,setDirection:e.setDirection,setSlideDisplayed:e.setSlideDisplayed,muted:e.state.muted}))))}))})))))}}]),a}(i.a.Component);var x=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.46b76a7c.chunk.js.map