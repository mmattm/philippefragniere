(this["webpackJsonpphilippe-fragniere"]=this["webpackJsonpphilippe-fragniere"]||[]).push([[0],{43:function(e,t,n){e.exports=n(87)},48:function(e,t,n){},49:function(e,t,n){},65:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),l=n.n(i),c=(n(48),n(49),n(10)),o=n(3),s=n(12),u=n(33),m=n.n(u),d=(n(65),n(11)),p=n(34);var f=function(e){return e.placeholder,r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"spinner"}))};function h(e){var t=e.src,n=e.alt,i=Object(a.useState)(!1),l=Object(c.a)(i,2),o=l[0],s=l[1];return r.a.createElement(a.Suspense,{fallback:r.a.createElement(f,null)},r.a.createElement(p.a,{src:t,alt:n,onLoad:function(){setTimeout((function(){s(!0)}),50)},className:"slide-visual"+(o?" loaded":"")}))}var E=n(36),v=n(38),b=n.n(v);var g=function(e){var t=e.id,n=e.fields;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("title",null,"Philippe Fragniere"," ",n.label?" \u2014 "+function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}(n.label):"")),r.a.createElement("div",{className:"slide"},r.a.createElement("div",{className:"slide-item",key:t},n.video&&r.a.createElement(b.a,{url:n.video[0].url,playing:!0,loop:!0,playsinline:!0,width:"100%",height:"100%",className:"slide-visual loaded video",config:{file:{attributes:{autoPlay:!0,muted:!0}}}}),n.photo&&!n.video&&r.a.createElement(h,{src:n.photo[0].thumbnails.large.url,alt:n.label}),!n.video&&!n.photo&&"No visuals")))},O=n(39),j=n.n(O),w={default:9,1100:6,700:3,500:2};var k=function(e){var t=e.slides.map((function(t,n){return r.a.createElement("div",{className:"grid-item",key:t.id,onClick:function(){return function(t){e.toggleThumbs(!1),e.dispatch({type:"set",position:t})}(n)}},t.fields.photo?r.a.createElement(h,{src:t.fields.photo[0].thumbnails.large.url,alt:t.fields.label}):"No visuals")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gallery"},r.a.createElement("div",{className:"gallery-content"},r.a.createElement(j.a,{breakpointCols:w,className:"grid",columnClassName:"grid_column"},t))))};var N=function(e){var t=e.slides,n=e.label,i=e.dispatch,l=Object(a.useState)(!1),o=Object(c.a)(l,2),s=o[0],u=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s?"white":""},s&&r.a.createElement(k,{slides:t,toggleThumbs:u,dispatch:i}),r.a.createElement("div",{className:"fixed top-left"},r.a.createElement("h1",null,s?r.a.createElement("a",{href:"mailto:contact@philippefragniere.ch"},"Bookings"):"Philippe Fragni\xe8re")),r.a.createElement("div",{className:"fixed top-right"},r.a.createElement("h2",{onClick:function(){return u(!s)},className:"clickable"},s?"Close":"More")),r.a.createElement("div",{className:"fixed bottom-left",dangerouslySetInnerHTML:{__html:!s&&n?"<h2>"+n+"</h2>":null}})))},y=n(90),x=n(89),S=n(40),F=function(e){return{position:e,anim:"fade"}},C=function(e,t){switch(t.type){case"next":return Object(d.a)(Object(d.a)({},e),{},{position:(e.position+1)%t.numItems,anim:"right"});case"prev":return Object(d.a)(Object(d.a)({},e),{},{position:(e.position-1+t.numItems)%t.numItems,anim:"left"});case"set":return Object(d.a)(Object(d.a)({},e),{},{position:t.position,anim:"fade"});case"reset":return F(0);default:throw new Error("Unexpected action")}};var I=function(e){var t=e.res,n=e.initialPos,i=Object(o.e)(),l=Object(o.f)(),u=function(e){var t=Object(a.useState)(e),n=Object(c.a)(t,2),r=n[0],i=n[1];return{value:r,animStart:function(){i(!0)},animEnd:function(){i(!1)}}}(!1),m=Object(S.a)({onSwipedLeft:function(){return j("next")},onSwipedRight:function(){return j("prev")},onSwiping:function(){return h(1)},preventDefaultTouchmoveEvent:!0,trackMouse:!1}),d=Object(a.useState)(0),p=Object(c.a)(d,2),f=p[0],h=p[1],E=Object(a.useReducer)(C,n,F),v=Object(c.a)(E,2),b=v[0],O=v[1];Object(a.useEffect)((function(){i.push({pathname:t.records[b.position].path})}),[b.position,t,i]),Object(a.useEffect)((function(){var e=function(e){var t=e.keyCode;37===t&&j("prev"),39===t&&j("next")};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}));var j=function(e){h(0),u.value||O({type:e,numItems:t.records.length})},w=t.records.map((function(e,t){return r.a.createElement(s.a,{key:t,exact:!0,path:e.path},r.a.createElement(g,e))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{slides:t.records,label:t.records[b.position].fields.label,dispatch:O}),r.a.createElement("div",Object.assign({className:"slider "+b.anim+"-transition"},m,{onClick:function(e){return f?h(0):e.clientX<e.view.innerWidth/2?j("prev"):j("next")}}),r.a.createElement(y.a,null,r.a.createElement(x.a,{key:l.key,timeout:800,classNames:"slide",onEntering:u.animStart,onExited:u.animEnd,unmountOnExit:!0},r.a.createElement(o.b,{location:l,basename:"/philippefragniere"},w)))))},T=function(){var e=Object(o.f)(),t=m()("https://boiling-bastion-11005.herokuapp.com/",{method:"GET"}),n=Object(a.useRef)(),i=Object(a.useState)(null),l=Object(c.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){if(!n.current){t.records.forEach((function(e,t){void 0===e.fields.title&&(e.fields.title="v-"+e.id),e.path="/"+function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="\xe0\xe1\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xb7/_,:;",n=0,a=t.length;n<a;n++)e=e.replace(new RegExp(t.charAt(n),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(n));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}(e.fields.title)}));u(function(){if("/"!==e.pathname){var n=t.records.findIndex((function(t){return t.path===e.pathname}));return n>=0?n:0}return 0}()),n.current=!0}}),[e.pathname,t.records]),n.current?r.a.createElement(I,{res:t,initialPos:s}):null},L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{basename:"/philippefragniere"},r.a.createElement(a.Suspense,{fallback:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fixed top-left"},r.a.createElement("h1",null,"Philippe Fragni\xe8re")),r.a.createElement(f,null))},r.a.createElement(T,null))))};var P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.20cf2b55.chunk.js.map